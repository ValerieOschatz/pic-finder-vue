(function(){"use strict";var e={8598:function(e,n,t){var r=t(9242),o=t(3396);const a={className:"page"};function c(e,n,t,r,c,i){const u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(u,{cards:c.cards,query:c.query,selectedCard:c.selectedCard,onSubmit:i.handleSubmit,onChangeQuery:i.handleChangeQuery,onScroll:i.handleScroll,onCardClick:i.handleCardClick,onBack:i.handleBack,onGetRandom:i.handleGetRandom},null,8,["cards","query","selectedCard","onSubmit","onChangeQuery","onScroll","onCardClick","onBack","onGetRandom"])])}const i="https://api.unsplash.com",u="gzwDDFQq4_W-6Ms5aAgkiV0d7CdVYFVwItKEGYIcSkU";function s(e){return e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)}const l=(e,n)=>fetch(`${i}/search/photos?page=${e}&query=${n}`,{method:"GET",headers:{Authorization:`Client-ID ${u}`,"Content-Type":"application/json"}}).then((e=>s(e))),d=()=>fetch(`${i}/photos/random`,{method:"GET",headers:{Authorization:`Client-ID ${u}`,"Content-Type":"application/json"}}).then((e=>s(e)));var h={name:"App",data(){return{cards:[],query:"",page:1,totalPages:0,isfetching:!1,selectedCard:null}},methods:{handleSubmit(){this.page=1,l(this.page,this.query).then((e=>{this.cards=[...e.results],this.totalPages=e.total_pages})).catch((e=>{console.log(e)}))},handleChangeQuery(e){this.query=e.target.value},getPictureList(){l(this.page,this.query).then((e=>{this.cards=[...this.cards,...e.results]})).catch((e=>{console.log(e)})).finally((()=>{this.isfetching=!1}))},handleScroll(e){e.target.documentElement.scrollTop+e.target.documentElement.clientHeight>=e.target.documentElement.scrollHeight&&(this.isfetching=!0,this.page+=1),this.isfetching&&this.cards.length<this.totalPages&&this.getPictureList()},handleCardClick(e){this.selectedCard=e},handleBack(){this.selectedCard=null},handleGetRandom(){d().then((e=>{this.selectedCard=e,this.$router.push("/card")})).catch((e=>{console.log(e)}))},goToHomePage(){this.selectedCard?this.$router.push("/card"):this.$router.push("/")}},mounted(){this.goToHomePage()}},m=t(89);const g=(0,m.Z)(h,[["render",c]]);var p=g,f=t(2483);function C(e,n,t,r,a,c){const i=(0,o.up)("Header"),u=(0,o.up)("Main"),s=(0,o.up)("Footer");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(i),(0,o.Wm)(u,{cards:t.cards,query:t.query,onSubmit:t.onSubmit,onChangeQuery:t.onChangeQuery,onCardClick:t.onCardClick,onGetRandom:t.onGetRandom},null,8,["cards","query","onSubmit","onChangeQuery","onCardClick","onGetRandom"]),(0,o.Wm)(s)],64)}const y={className:"header"},_=(0,o._)("div",{className:"header__container"},[(0,o._)("h1",{className:"header__title"},"Pic Finder")],-1),v=[_];function b(e,n,t,r,a,c){return(0,o.wg)(),(0,o.iD)("header",y,v)}var k={name:"Header-component"};const S=(0,m.Z)(k,[["render",b]]);var F=S;const w={className:"gallery"},q={className:"gallery__card-list"},N=["src","alt","onClick"];function Q(e,n,t,r,a,c){const i=(0,o.up)("Form"),u=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("main",w,[(0,o.Wm)(i,{query:t.query,onSubmit:t.onSubmit,onChangeQuery:t.onChangeQuery},null,8,["query","onSubmit","onChangeQuery"]),(0,o._)("button",{className:"gallery__button",type:"button",onClick:n[0]||(n[0]=(...e)=>t.onGetRandom&&t.onGetRandom(...e))},"Show random picture"),(0,o._)("ul",q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cards,(e=>((0,o.wg)(),(0,o.iD)("li",{className:"gallery__card-item",key:e.id},[(0,o.Wm)(u,{to:"/card"},{default:(0,o.w5)((()=>[(0,o._)("img",{className:"gallery__image",src:e.urls.small,alt:e.alt_description,onClick:n=>c.handleClick(e)},null,8,N)])),_:2},1024)])))),128))])])}const G=["value"],O=(0,o._)("button",{className:"gallery__submit-button",type:"submit"},"Search",-1);function D(e,n,t,a,c,i){return(0,o.wg)(),(0,o.iD)("form",{className:"gallery__form",name:"search",onSubmit:n[1]||(n[1]=(0,r.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,o._)("input",{className:"gallery__input",id:"name",name:"name",type:"text",required:"",value:t.query,onInput:n[0]||(n[0]=(...e)=>t.onChangeQuery&&t.onChangeQuery(...e))},null,40,G),O],32)}var P={name:"Form-component",props:{query:String,onSubmit:Function,onChangeQuery:Function}};const j=(0,m.Z)(P,[["render",D]]);var R=j,H={name:"Main-component",components:{Form:R},props:{cards:Array,query:String,onSubmit:Function,onChangeQuery:Function,onCardClick:Function,onGetRandom:Function},methods:{handleClick(e){this.onCardClick(e)}}};const I=(0,m.Z)(H,[["render",Q]]);var $=I;const E={className:"footer"},T=(0,o._)("p",{className:"footer__text"},"© 2022 Pic Finder",-1),A=[T];function W(e,n,t,r,a,c){return(0,o.wg)(),(0,o.iD)("footer",E,A)}var x={name:"Footer-component"};const B=(0,m.Z)(x,[["render",W]]);var Z=B,M={name:"Home-page",components:{Main:$,Header:F,Footer:Z},props:{cards:Array,query:String,onSubmit:Function,onChangeQuery:Function,onScroll:Function,onCardClick:Function,selectedCard:Object,onBack:Function,onGetRandom:Function},mounted(){document.addEventListener("scroll",this.onScroll)},unmounted(){document.removeEventListener("scroll",this.onScroll)}};const z=(0,m.Z)(M,[["render",C]]);var L=z,Y=t(7139);const V={className:"cardInfo"},K=(0,o.Uk)("Go back"),U={className:"cardInfo__figure"},J=["src","alt"],X={className:"cardInfo__text"};function ee(e,n,t,r,a,c){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",V,[(0,o.Wm)(i,{to:"/",className:"cardInfo__link",onClick:t.onBack},{default:(0,o.w5)((()=>[K])),_:1},8,["onClick"]),(0,o._)("figure",U,[(0,o._)("img",{className:"cardInfo__image",src:t.selectedCard?t.selectedCard.urls.regular:"",alt:t.selectedCard?t.selectedCard.alt_description:""},null,8,J),(0,o._)("figcaption",X,(0,Y.zw)(t.selectedCard?t.selectedCard.alt_description:""),1)])])}var ne={name:"About-page",props:{selectedCard:Object,onBack:Function,cards:Array,query:String,onSubmit:Function,onChangeQuery:Function,onScroll:Function,onCardClick:Function,onGetRandom:Function}};const te=(0,m.Z)(ne,[["render",ee]]);var re=te;const oe=[{path:"/",component:L},{path:"/card",component:re}],ae=(0,f.p7)({history:(0,f.PO)(),routes:oe});var ce=ae;(0,r.ri)(p).use(ce).mount("#app")}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,r,o,a){if(!r){var c=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],a=e[l][2];for(var i=!0,u=0;u<r.length;u++)(!1&a||c>=a)&&Object.keys(t.O).every((function(e){return t.O[e](r[u])}))?r.splice(u--,1):(i=!1,a<c&&(c=a));if(i){e.splice(l--,1);var s=o();void 0!==s&&(n=s)}}return n}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,o,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var o,a,c=r[0],i=r[1],u=r[2],s=0;if(c.some((function(n){return 0!==e[n]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(u)var l=u(t)}for(n&&n(r);s<c.length;s++)a=c[s],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(l)},r=self["webpackChunkpic_finder_vue"]=self["webpackChunkpic_finder_vue"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(8598)}));r=t.O(r)})();
//# sourceMappingURL=app.e2f3a423.js.map